<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRS GB28181 测试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
        }
        .info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .info strong {
            color: #0066cc;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        video {
            width: 100%;
            max-width: 800px;
            background: #000;
            border-radius: 4px;
        }
        .api-link {
            display: inline-block;
            margin: 10px 10px 10px 0;
            padding: 10px 15px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
        }
        .api-link:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SRS GB28181 测试服务器</h1>
        <div class="info">
            <strong>SIP 服务器配置：</strong><br>
            SIP ID: 34020000002000000001<br>
            SIP 域: 3402000000<br>
            SIP 端口: 5060<br>
            RTP 端口范围: 30000-30100
        </div>
        <div class="status success">
            ✓ SRS GB28181 服务器运行中
        </div>
    </div>

    <div class="container">
        <h2>API 接口</h2>
        <a href="http://localhost:1986/api/v1/summaries" class="api-link" target="_blank">查看服务器摘要</a>
        <a href="http://localhost:1986/api/v1/streams/" class="api-link" target="_blank">查看流列表</a>
        <a href="http://localhost:1986/api/v1/clients/" class="api-link" target="_blank">查看客户端列表</a>
        <a href="http://localhost:1986/api/v1/gb28181/devices" class="api-link" target="_blank">查看GB28181设备</a>
    </div>

    <div class="container">
        <h2>测试说明</h2>
        <ol>
            <li>确保 SRS 容器正在运行：<code>docker ps | grep gb28181-srs</code></li>
            <li>配置您的 GB28181 客户端连接到：
                <ul>
                    <li>SIP 服务器 IP: <strong>localhost</strong> (或容器IP)</li>
                    <li>SIP 服务器端口: <strong>5062</strong> (映射后的端口)</li>
                    <li>SIP 服务器 ID: <strong>34020000002000000001</strong></li>
                    <li>SIP 服务器域: <strong>3402000000</strong></li>
                </ul>
            </li>
            <li>启动您的 GB28181 客户端进行注册</li>
            <li>查看 API 接口确认设备已注册</li>
        </ol>
    </div>

    <div class="container">
        <h2>推流测试</h2>
        <p>设备注册并开始推流后，可以使用以下方式测试：</p>
        <ol>
            <li><strong>查看流列表：</strong>
                <a href="http://localhost:1986/api/v1/streams/" class="api-link" target="_blank">查看当前流</a>
            </li>
            <li><strong>使用播放器测试：</strong>
                <a href="player.html" class="api-link" target="_blank">打开流播放器</a>
            </li>
            <li><strong>使用命令行测试：</strong>
                <pre style="background: #f4f4f4; padding: 10px; border-radius: 4px;">./test_gb28181_stream.sh</pre>
            </li>
        </ol>
        <div class="info">
            <strong>播放地址格式：</strong><br>
            假设流名称为 <code>live/34020000001320000001</code><br>
            • HTTP-FLV: <code>http://localhost:8081/live/34020000001320000001.flv</code><br>
            • HLS: <code>http://localhost:8081/live/34020000001320000001.m3u8</code><br>
            • RTMP: <code>rtmp://localhost:1936/live/34020000001320000001</code>
        </div>
    </div>

    <div class="container">
        <h2>日志查看</h2>
        <p>查看 SRS 日志：</p>
        <pre style="background: #f4f4f4; padding: 10px; border-radius: 4px;">docker logs -f gb28181-srs</pre>
    </div>
</body>
</html>

